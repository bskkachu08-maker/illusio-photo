<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ãƒ‘ãƒ¼ãƒ„å‰Šé™¤ç®¡ç†ãƒšãƒ¼ã‚¸</title>
<style>
body{
 font-family:"Hiragino Sans",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
 background:#f7f7f7; color:#111; text-align:center;
 padding:20px;
}
h1{ font-size:1.6rem; margin-bottom:16px; }
#photos{
 display:flex;
 flex-direction:column;
 align-items:center;
 gap:18px;
 margin-top:24px;
}
.part{
 width:90%;
 max-width:320px;
 background:#fff;
 border:1px solid #ddd;
 border-radius:10px;
 padding:10px;
 box-shadow:0 2px 6px rgba(0,0,0,.05);
}
img{
 width:100%;
 border-radius:8px;
 border:1px solid #eee;
}
button{
 margin-top:10px;
 background:#e33;
 color:#fff;
 border:none;
 padding:8px 12px;
 border-radius:6px;
 cursor:pointer;
 font-weight:600;
 font-size:0.9rem;
}
button:hover{ opacity:.8; }
</style>
</head>
<body>
<h1>ï¼‹ILLuSio ãƒ‘ãƒ¼ãƒ„å‰Šé™¤ãƒšãƒ¼ã‚¸</h1>
<p>å‰Šé™¤ã—ãŸã„ãƒ‘ãƒ¼ãƒ„ã‚’é¸æŠã—ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦å‰Šé™¤ã—ã¾ã™ã€‚</p>
<div id="photos"></div>
<script>
async function loadPhotos(){
 const res = await fetch("/photos");
 const data = await res.json();
 const area = document.getElementById("photos");
 area.innerHTML = "";
 data.forEach(p=>{
   const div = document.createElement("div");
   div.className="part";
   div.innerHTML = `
<img src="${p.listUrl}" alt="${p.color}">
<p style="font-size:.9rem;opacity:.7;margin:6px 0;">${p.color||"ä¸æ˜"}</p>
<button onclick="deletePhoto('${p.public_id}')">ğŸ—‘ å‰Šé™¤</button>
   `;
   area.appendChild(div);
 });
}
async function deletePhoto(id){
 const pw = prompt("ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
 if(!pw) return;
 const res = await fetch("/delete-photo", {
   method:"POST",
   headers:{ "Content-Type":"application/json" },
   body: JSON.stringify({ id, password: pw })
 });
 const json = await res.json();
 alert(json.message);
 if(json.success) loadPhotos();
}
loadPhotos();
</script>
</body>
</html>
